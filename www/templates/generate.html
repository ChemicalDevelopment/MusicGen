<ion-view view-title="POP MUSIC GEN">
    <ion-content>
        <div id="myContainer">

            <div class="button-bar">
                <button class="button button-balanced" ng-click="start()" ng-hide="isRunning">
                    Start
                </button>
                <button class="button button-assertive" ng-click="end()" ng-show="isRunning">
                    Stop
                </button>
                <button class="button button-energized" ng-click="resetAll()">
                    Reset
                </button>
            </div>
            <div class="list">

                <label class="item item-input item-select">
                    <div class="input-label">
                        Key
                    </div>
                    <select ng-model="$parent.selectedKey" ng-change="updateKey(selectedKey)" ng-options="value as key for (key , value) in keyValues"></select>
                </label>

                <label class="item item-input item-select">
                    <div class="input-label">
                        Waveform
                    </div>
                    <select ng-model="$parent.waveform" ng-change="updateWaveform(waveform)" ng-options="value as key for (key , value) in waveforms"></select>
                </label>

                <label class="item item-input item-select">
                    <div class="input-label">
                        Octave
                    </div>
                    <select ng-model="$parent.selectedOctave" ng-change="updateOctave(selectedOctave)" ng-options="value for value in octaves"></select>
                </label>

                <label class="item item-input item-select">
                    <div class="input-label">
                        Range
                    </div>
                    <select ng-model="$parent.selectedRange" ng-change="updateRange(selectedRange)" ng-options="value for value in ranges"></select>
                </label>

                <label class="item item-input-inset">
                    <div class="input-label">
                        Tempo
                    </div>
                    <div class="item range range-positive tempoInputRange">
                        <input type="range" name="tempo" min="40" max="160" ng-model="$parent.selectedTempo" ng-model-options='{ debounce: 500 }' ng-change="updateTempo(selectedTempo)">
                    </div>
                </label>
            </div>
            <div>
                <label class="item item-input item-select">
                    <div class="input-label">
                        Visualization
                    </div>
                    <select ng-model="$parent.visualSetting" ng-change="updateVisualization()">
                        <option>off</option>
                        <option>sinewave</option>
                        <option>frequencybars</option>
                    </select>
                </label>
                <div ng-hide="visualSetting == 'off'">
                    <canvas id="canv" width="512" height="128" style="width: 100%;"></canvas>
                    <ul class="list">

                        <li class="item item-toggle">
                            Melody
                            <label class="toggle toggle-assertive">
                                <input type="checkbox" ng-model="$parent.visualizeMelody" ng-change="updateVisualizationMelody()">
                                <div class="track">
                                    <div class="handle"></div>
                                </div>
                            </label>
                        </li>

                        <li class="item item-toggle">
                            Chord 1
                            <label class="toggle toggle-assertive">
                                <input type="checkbox" ng-model="$parent.visualizeChor1" ng-change="updateVisualizationChor1()">
                                <div class="track">
                                    <div class="handle"></div>
                                </div>
                            </label>
                        </li>

                        <li class="item item-toggle">
                            Chord 2
                            <label class="toggle toggle-assertive">
                                <input type="checkbox" ng-model="$parent.visualizeChor2" ng-change="updateVisualizationChor2()">
                                <div class="track">
                                    <div class="handle"></div>
                                </div>
                            </label>
                        </li>

                        <li class="item item-toggle">
                            Chord 3
                            <label class="toggle toggle-assertive">
                                <input type="checkbox" ng-model="$parent.visualizeChor3" ng-change="updateVisualizationChor3()">
                                <div class="track">
                                    <div class="handle"></div>
                                </div>
                            </label>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>
